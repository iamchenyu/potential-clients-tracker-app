{"ast":null,"code":"var _jsxFileName = \"/Users/chenyuwang/Storage/Developer/Courses/Springboard/Projects/potential-clients-tracker/frontend/src/clients/clientTabs/clientTabProgress/ClientDetailTabBarProgressDatesMap.js\",\n  _s = $RefreshSig$();\nimport * as React from \"react\";\nimport \"./progress.css\";\nimport { Alert, Divider } from \"@mui/material\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport moment from \"moment\";\nimport $ from \"jquery\";\nimport PotentialClientTrackerApi from \"../../../api\";\nimport ClientDetailTabBarProgressAddDatesForm from \"./ClientDetailTabBarProgressAddDatesForm\";\nimport AlertBanner from \"../../../AlertBanner\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ClientDetailTabBarProgressDatesMap = _ref => {\n  _s();\n  let {\n    s,\n    client,\n    updateClient,\n    statusMapping\n  } = _ref;\n  const [clientDetails, setClientDetails] = React.useState(client);\n  const [dummy, setDummy] = React.useState(true);\n  const [open, setOpen] = React.useState(false);\n  const [statusId, setStatusId] = React.useState(null);\n  const [err, setErr] = React.useState(null);\n  const handleClickOpen = e => {\n    let idStatus;\n    if (!$(e.target)[0].id) {\n      idStatus = $($(e.target)[0].parentElement)[0].id;\n    } else {\n      idStatus = $(e.target)[0].id;\n    }\n    const id = idStatus.split(\"-\")[0];\n    setOpen(true);\n    setStatusId(id);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  React.useEffect(() => {\n    $(\".stepper_item\").map((item, idx) => {\n      if ($(idx).siblings().children().length !== 0) {\n        $(idx).addClass(\"success\");\n      }\n      if ($(idx).siblings().children().length === 0) {\n        $(idx).removeClass(\"success\");\n      }\n    });\n  });\n  React.useEffect(() => {\n    const fetchClient = async id => {\n      const {\n        data\n      } = await PotentialClientTrackerApi.getClient(id);\n      setClientDetails(data.client);\n      updateClient(data.client);\n    };\n    fetchClient(client.id);\n  }, [dummy]);\n  const handleDateDelete = async e => {\n    let id;\n    if (!$(e.target)[0].id) {\n      id = $($(e.target)[0].parentElement)[0].id;\n    } else {\n      id = $(e.target)[0].id;\n    }\n    try {\n      await PotentialClientTrackerApi.deleteStatus(id);\n      setDummy(!dummy);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n  const chipstyle = {\n    cursor: \"pointer\",\n    backgroundColor: \"#FFCF1C\",\n    minWidth: \"120px\",\n    fontSize: \"0.9rem\",\n    display: \"inline-flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    gap: \"10px\",\n    height: \"32px\",\n    color: \"rgba(0, 0, 0, 0.87)\",\n    borderRadius: \"16px\"\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [err ? /*#__PURE__*/_jsxDEV(AlertBanner, {\n      severity: \"error\",\n      title: \"Delete Failed\",\n      msg: `${err} - please try again`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stepper_item_date\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stepper_item \",\n        onClick: handleClickOpen,\n        id: `${s.value}-status`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stepper_title\",\n          children: s.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stepper_date\",\n        children: clientDetails.status_updated_dates ? clientDetails.status_updated_dates.map(date => {\n          if (statusMapping[date.status_id] === s.label) {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              style: chipstyle,\n              onClick: handleDateDelete,\n              id: date.id,\n              children: [moment(date.update_date).format(\"MM-DD-YYYY\"), /*#__PURE__*/_jsxDEV(CloseIcon, {\n                fontSize: \"sm\",\n                sx: {\n                  marginTop: \"2px\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 23\n              }, this)]\n            }, date.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 21\n            }, this);\n          }\n        }) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ClientDetailTabBarProgressAddDatesForm, {\n      open: open,\n      handleClose: handleClose,\n      client: clientDetails,\n      statusId: statusId,\n      statusMapping: statusMapping,\n      setClientDetails: setClientDetails,\n      updateClient: updateClient\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(ClientDetailTabBarProgressDatesMap, \"02e9pB88g8NLuqKjv5Z2zhAuaCI=\");\n_c = ClientDetailTabBarProgressDatesMap;\nexport default ClientDetailTabBarProgressDatesMap;\nvar _c;\n$RefreshReg$(_c, \"ClientDetailTabBarProgressDatesMap\");","map":{"version":3,"names":["React","Alert","Divider","CloseIcon","moment","$","PotentialClientTrackerApi","ClientDetailTabBarProgressAddDatesForm","AlertBanner","ClientDetailTabBarProgressDatesMap","s","client","updateClient","statusMapping","clientDetails","setClientDetails","useState","dummy","setDummy","open","setOpen","statusId","setStatusId","err","setErr","handleClickOpen","e","idStatus","target","id","parentElement","split","handleClose","useEffect","map","item","idx","siblings","children","length","addClass","removeClass","fetchClient","data","getClient","handleDateDelete","deleteStatus","console","log","chipstyle","cursor","backgroundColor","minWidth","fontSize","display","alignItems","justifyContent","gap","height","color","borderRadius","value","label","status_updated_dates","date","status_id","update_date","format","marginTop"],"sources":["/Users/chenyuwang/Storage/Developer/Courses/Springboard/Projects/potential-clients-tracker/frontend/src/clients/clientTabs/clientTabProgress/ClientDetailTabBarProgressDatesMap.js"],"sourcesContent":["import * as React from \"react\";\nimport \"./progress.css\";\nimport { Alert, Divider } from \"@mui/material\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport moment from \"moment\";\nimport $ from \"jquery\";\nimport PotentialClientTrackerApi from \"../../../api\";\nimport ClientDetailTabBarProgressAddDatesForm from \"./ClientDetailTabBarProgressAddDatesForm\";\nimport AlertBanner from \"../../../AlertBanner\";\n\nconst ClientDetailTabBarProgressDatesMap = ({\n  s,\n  client,\n  updateClient,\n  statusMapping,\n}) => {\n  const [clientDetails, setClientDetails] = React.useState(client);\n  const [dummy, setDummy] = React.useState(true);\n  const [open, setOpen] = React.useState(false);\n  const [statusId, setStatusId] = React.useState(null);\n  const [err, setErr] = React.useState(null);\n\n  const handleClickOpen = (e) => {\n    let idStatus;\n    if (!$(e.target)[0].id) {\n      idStatus = $($(e.target)[0].parentElement)[0].id;\n    } else {\n      idStatus = $(e.target)[0].id;\n    }\n    const id = idStatus.split(\"-\")[0];\n    setOpen(true);\n    setStatusId(id);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  React.useEffect(() => {\n    $(\".stepper_item\").map((item, idx) => {\n      if ($(idx).siblings().children().length !== 0) {\n        $(idx).addClass(\"success\");\n      }\n      if ($(idx).siblings().children().length === 0) {\n        $(idx).removeClass(\"success\");\n      }\n    });\n  });\n\n  React.useEffect(() => {\n    const fetchClient = async (id) => {\n      const { data } = await PotentialClientTrackerApi.getClient(id);\n      setClientDetails(data.client);\n      updateClient(data.client);\n    };\n    fetchClient(client.id);\n  }, [dummy]);\n\n  const handleDateDelete = async (e) => {\n    let id;\n    if (!$(e.target)[0].id) {\n      id = $($(e.target)[0].parentElement)[0].id;\n    } else {\n      id = $(e.target)[0].id;\n    }\n    try {\n      await PotentialClientTrackerApi.deleteStatus(id);\n      setDummy(!dummy);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const chipstyle = {\n    cursor: \"pointer\",\n    backgroundColor: \"#FFCF1C\",\n    minWidth: \"120px\",\n    fontSize: \"0.9rem\",\n    display: \"inline-flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    gap: \"10px\",\n    height: \"32px\",\n    color: \"rgba(0, 0, 0, 0.87)\",\n    borderRadius: \"16px\",\n  };\n\n  return (\n    <>\n      {err ? (\n        <AlertBanner\n          severity=\"error\"\n          title=\"Delete Failed\"\n          msg={`${err} - please try again`}\n        />\n      ) : null}\n      <div className=\"stepper_item_date\">\n        <div\n          className=\"stepper_item \"\n          onClick={handleClickOpen}\n          id={`${s.value}-status`}\n        >\n          <div className=\"stepper_title\">{s.label}</div>\n        </div>\n        <div className=\"stepper_date\">\n          {clientDetails.status_updated_dates\n            ? clientDetails.status_updated_dates.map((date) => {\n                if (statusMapping[date.status_id] === s.label) {\n                  return (\n                    <div\n                      style={chipstyle}\n                      onClick={handleDateDelete}\n                      id={date.id}\n                      key={date.id}\n                    >\n                      {moment(date.update_date).format(\"MM-DD-YYYY\")}\n\n                      <CloseIcon fontSize=\"sm\" sx={{ marginTop: \"2px\" }} />\n                    </div>\n                  );\n                }\n              })\n            : null}\n        </div>\n      </div>\n      <Divider />\n      <ClientDetailTabBarProgressAddDatesForm\n        open={open}\n        handleClose={handleClose}\n        client={clientDetails}\n        statusId={statusId}\n        statusMapping={statusMapping}\n        setClientDetails={setClientDetails}\n        updateClient={updateClient}\n      />\n    </>\n  );\n};\n\nexport default ClientDetailTabBarProgressDatesMap;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}